# 2026-02-09

## Phase 0–6: Full Platform Build

**What was done:**
- Built the entire BFD MVP in a single day across 6 phases
- **Phase 0**: Next.js 16 (App Router), Supabase, shadcn/ui, Tailwind CSS v4 project scaffold
- **Phase 1**: Database schema with RLS, auth trigger (`handle_new_user`), TypeScript types
- **Phase 2 + 3**: Admin portal (developer management, project management, evaluations) and developer portal (profile, evaluations, recordings)
- **Phase 4**: Company portal — onboarding wizard, project creation, Stripe integration, evaluation management
- **Phase 5**: ClarityFlow integration — auto-create conversations per evaluation, webhook receiver, embedded recording UI
- **Phase 6**: Transactional email notifications via Resend + React Email

**Decisions made:**
- **Supabase over Firebase/Prisma**: Postgres + RLS + built-in auth. Row-level security means less server-side auth code
- **App Router over Pages Router**: Server components reduce client bundle, `cookies()` for SSR auth
- **ClarityFlow for recordings**: Third-party recording tool rather than building our own — ships faster
- **Resend for email**: Simple API, React Email templates, good DX. Cheaper than SendGrid for low volume

**Gotchas:**
- Company portal RLS needed service role client for onboarding writes — INSERT policies separate from SELECT/UPDATE
- Email from address must match verified Resend subdomain (`email.builtfor.dev`)
- `@react-email/render` must be a direct dependency, not just transitive

**Key files created:**
- Full `supabase/migrations/` schema (profiles, developers, companies, projects, evaluations)
- `src/lib/supabase/` — server/client/middleware helpers
- `src/app/(admin)/admin/` — admin dashboard, developers, projects, evaluations
- `src/app/(dev)/dev/` — developer portal
- `src/app/(company)/` — company onboarding and portal
- `src/lib/email/` — Resend integration and React Email templates
